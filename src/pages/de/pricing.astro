---
import { getPricingContent } from '~/lib/sanity';
import Layout from '~/layouts/PageLayout.astro';

import HeroText from '~/components/widgets/HeroText.astro';
import Prices from '~/components/widgets/Pricing.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Steps from '~/components/widgets/Steps.astro';
import Features3 from '~/components/widgets/Features3.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';

// Get content from Sanity
const pageData = await getPricingContent('de');
const { metadata, pricingHeroText, pricingWidget, features3, stepsWidget, faqsWidget, cta } = pageData || {};
---

<Layout metadata={metadata}>
  <!-- HeroText Widget ******************* -->

  {pricingHeroText && (
    <HeroText
      tagline={pricingHeroText.tagline}
      title={pricingHeroText.title}
      subtitle={pricingHeroText.subtitle}
    />
  )}

  <!-- Pricing Widget ******************* -->

  {pricingWidget && (
    <Prices
      title={pricingWidget.title}
      subtitle={pricingWidget.subtitle}
      prices={pricingWidget.prices}
    />
  )}

  <!-- Features3 Widget ************** -->

  {features3 && (
    <Features3
      title={features3.title}
      subtitle={features3.subtitle}
      columns={features3.columns}
      items={features3.items}
      classes={features3.classes}
    />
  )}

  <!-- Steps Widget ****************** -->

  {stepsWidget && (
    <Steps
      title={stepsWidget.title}
      tagline={stepsWidget.tagline}
      isReversed={stepsWidget.isReversed}
      items={stepsWidget.items}
      image={stepsWidget.image}
    />
  )}

  <!-- FAQs Widget ******************* -->

  {faqsWidget && (
    <FAQs
      title={faqsWidget.title}
      subtitle={faqsWidget.subtitle}
      columns={faqsWidget.columns}
      items={faqsWidget.items}
    />
  )}

  <!-- CallToAction Widget *********** -->

  {cta && (
    <CallToAction
      title={cta.title}
      subtitle={cta.subtitle}
      actions={cta.actions}
    />
  )}
</Layout>
