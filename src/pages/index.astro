---
import { getHomepageContent } from '~/lib/sanity';
import Layout from '~/layouts/PageLayout.astro';

import BigNote from '~/components/widgets/BigNote.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Content from '~/components/widgets/Content.astro';
import FAQs from '~/components/widgets/FAQs.astro';
import Features from '~/components/widgets/Features.astro';
import Hero2 from '~/components/widgets/Hero2.astro';
import Stats from '~/components/widgets/Stats.astro';
import Steps from '~/components/widgets/Steps.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';

// Get content from Sanity
const pageData = await getHomepageContent('en');
const { metadata, hero, note, features, content, steps, faqs, stats, testimonials, cta } = pageData || {};
---

<Layout metadata={metadata}>
  {hero && (
    <Hero2
      title={hero.title}
      tagline={hero.tagline}
      image={hero.image}
      actions={hero.actions}
    />
  )}

  <!-- Note Widget ******************* -->
  
  {note && (
    <BigNote
      title={`<span class='text-white text-7xl'>${note.title}</span>`}
      subtitle={`<br/><a href='#features' class='text-white'><u>${note.subtitle}</u></a>`}
    >
      <Fragment slot="bg">
        <div class="absolute inset-0 bg-primary dark:bg-transparent"></div>
      </Fragment>
    </BigNote>
  )}

  <!-- Note Widget ******************* -->
  <!-- Features Widget *************** -->

  {features && (
    <Features
      id="features"
      title={features.title}
      subtitle={features.subtitle}
      items={features.items}
    />
  )}

  <!-- Content Widget **************** -->

  {content && content.map((section) => (
    <Content
      isReversed={section.isReversed}
      items={section.items}
      image={section.image}
    >
      <Fragment slot="content">
        <h3 class="text-2xl font-bold tracking-tight dark:text-white sm:text-3xl mb-2">{section.title}</h3>
        {section.subtitle && <p class="text-muted dark:text-gray-400">{section.subtitle}</p>}
        {section.description && <p class="mt-3">{section.description}</p>}
      </Fragment>

      <Fragment slot="bg">
        <div class="absolute inset-0 bg-blue-50 dark:bg-transparent"></div>
      </Fragment>
    </Content>
  ))}

  <!-- Steps Widget ****************** -->

  {steps && (
    <Steps
      title={steps.title}
      subtitle={steps.subtitle}
      items={steps.items}
    />
  )}

  <!-- <Testimonials
    title="Words from real customers"
    testimonials={[
      {
        testimonial: `The designs are not only visually appealing but also highly professional. The templates have saved me a significant amount of time while helping me make a lasting impression on my clients.`,
        name: 'Emily Kennedy',
        job: 'Front-end developer',
        image: {
          src: 'https://images.unsplash.com/photo-1618835962148-cf177563c6c0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=930&q=80',
          alt: 'Emily Kennedy Image',
        },
      },
      {
        testimonial: `It beautifully showcases my work, with its clean and elegant design that lets my photographs shine. Customization was a breeze, even for a non-tech person like me. The result is a professional and immersive portfolio that's garnered numerous compliments.`,
        name: 'Sarah Hansen',
        job: 'Photographer',
        image: {
          src: 'https://images.unsplash.com/photo-1561406636-b80293969660?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80',
          alt: 'Sarah Hansen Image',
        },
      },
      {
        testimonial: `I discovered these templates and I'm impressed by their variety and quality. They've helped me establish a consistent brand image across my marketing and social platforms, elevating my business's overall appearance.`,
        name: 'Mark Wilkinson',
        job: 'Small business owner',
        image: {
          src: 'https://images.unsplash.com/photo-1545167622-3a6ac756afa4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=824&q=80',
          alt: 'Mark Wilkinson Image',
        },
      },
    ]}
    callToAction={{
      target: '_blank',
      text: 'More testimonials...',
      href: 'https://github.com/onwidget/astrowind',
      icon: 'tabler:chevron-right',
    }}
  /> -->

  <!-- Features2 Widget ************** -->

  <!-- HighlightedPosts Widget ******* -->

  <!--   <BlogLatestPosts
    title="Find out more content in our Blog"
    information={`The blog is used to display AstroWind documentation.
                        Each new article will be an important step that you will need to know to be an expert in creating a website using Astro + Tailwind CSS.
                        Astro is a very interesting technology. Thanks.
                `}
  /> -->

  <!-- FAQs Widget ******************* -->
  
  {faqs && (
    <FAQs
      title={faqs.title}
      subtitle={faqs.subtitle}
      items={faqs.items}
    />
  )}

  <!-- Stats Widget ****************** -->
  
  {stats && (
    <Stats
      title={stats.title}
      stats={stats.items}
    />
  )}

  <!-- Testimonials Widget *********** -->
  
  {testimonials && (
    <Testimonials
      title={testimonials.title}
      subtitle={testimonials.subtitle}
      testimonials={testimonials.items}
    />
  )}

  <!-- CallToAction Widget *********** -->

  {cta && (
    <CallToAction
      actions={cta.actions}
    >
      <Fragment slot="title">{cta.title}</Fragment>
      <Fragment slot="subtitle">{cta.subtitle}</Fragment>
    </CallToAction>
  )}
</Layout>
